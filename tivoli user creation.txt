vi crt_user.sql
cat crt_user.sql

   CREATE USER "TIVOLI" IDENTIFIED BY tivoli
      DEFAULT TABLESPACE "USERS"
      TEMPORARY TABLESPACE "TEMP"
      PROFILE "UNLIMITED";
 ALTER USER "TIVOLI" LOCAL TEMPORARY TABLESPACE "TIVOLIORTEMPTS";


  DECLARE
  TEMP_COUNT NUMBER;
  SQLSTR VARCHAR2(200);
BEGIN
  SQLSTR := 'ALTER USER "TIVOLI" QUOTA 209715200 ON "TIVOLIORTS"';
  EXECUTE IMMEDIATE SQLSTR;
EXCEPTION
  WHEN OTHERS THEN
    IF SQLCODE = -30041 THEN
      SQLSTR := 'SELECT COUNT(*) FROM USER_TABLESPACES
              WHERE TABLESPACE_NAME = ''TIVOLIORTS'' AND CONTENTS = ''TEMPORARY''';
      EXECUTE IMMEDIATE SQLSTR INTO TEMP_COUNT;
      IF TEMP_COUNT = 1 THEN RETURN;
      ELSE RAISE;
      END IF;
    ELSE
      RAISE;
    END IF;
END;
/


   GRANT "CONNECT" TO "TIVOLI";
   GRANT "TIVOLI_ROLE" TO "TIVOLI";


  GRANT CREATE SESSION TO "TIVOLI";
  GRANT RESTRICTED SESSION TO "TIVOLI";
  GRANT SELECT ANY DICTIONARY TO "TIVOLI";


  GRANT SELECT ON "SYS"."TS$" TO "TIVOLI";
  GRANT SELECT ON "SYS"."UNDO$" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$LOG" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$STANDBY_LOG" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$DATAGUARD_STATUS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$BGPROCESS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$FILESTAT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$TEMPSTAT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$LOGFILE" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$PARAMETER" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$SYSTEM_PARAMETER" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$SPPARAMETER" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$DATABASE" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$INSTANCE" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$VERSION" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$DATABASE_BLOCK_CORRUPTION" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$ARCHIVED_LOG" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$LOG_HISTORY" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$ARCHIVE_GAP" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$DATAFILE_HEADER" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$DATAFILE" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$TEMPFILE" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$TABLESPACE" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$MANAGED_STANDBY" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$ARCHIVE_DEST" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$DATAGUARD_STATS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$RECOVERY_PROGRESS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$ACTIVE_INSTANCES" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$ARCHIVE_DEST_STATUS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$LOCK_TYPE" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$RESOURCE_LIMIT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$PGA_TARGET_ADVICE" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$PGASTAT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$DLM_MISC" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$GES_BLOCKING_ENQUEUE" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$BUFFER_POOL_STATISTICS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$LOG" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$PROCESS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$BGPROCESS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$SESSION" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$LOCKED_OBJECT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$LATCH" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$LATCH_CHILDREN" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$LOCK" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$SYSSTAT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$OSSTAT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$FILESTAT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$FLASHBACK_DATABASE_LOGFILE" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$FLASHBACK_DATABASE_LOG" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$ROLLSTAT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$UNDOSTAT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$SGA" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$CLUSTER_INTERCONNECTS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$PARAMETER" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$SYSTEM_PARAMETER" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$ROWCACHE" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$LIBRARYCACHE" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$INSTANCE" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$SQL" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$OPTION" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$SGASTAT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$SGAINFO" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$DATAFILE_HEADER" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$ARCHIVE_DEST" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$SESSION_WAIT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$SESS_IO" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$SORT_SEGMENT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$ARCHIVE_DEST_STATUS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$SEGMENT_STATISTICS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$ENQUEUE_STAT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$ASM_TEMPLATE" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$ASM_DISKGROUP_STAT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$ASM_DISK_STAT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$ASM_CLIENT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$RECOVERY_FILE_DEST" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$FLASH_RECOVERY_AREA_USAGE" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$SYSMETRIC" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$SYSMETRIC_HISTORY" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$SERVICES" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$SYSMETRIC_SUMMARY" TO "TIVOLI";
  GRANT SELECT ON "SYS"."GV_$FILEMETRIC" TO "TIVOLI";
  GRANT SELECT ON "SYS"."DBA_CLUSTERS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."DBA_INDEXES" TO "TIVOLI";
  GRANT SELECT ON "SYS"."DBA_OBJECTS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."DBA_TABLES" TO "TIVOLI";
  GRANT SELECT ON "SYS"."DBA_SEGMENTS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."DBA_EXTENTS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."DBA_UNDO_EXTENTS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."DBA_FREE_SPACE" TO "TIVOLI";
  GRANT SELECT ON "SYS"."DBA_DATA_FILES" TO "TIVOLI";
  GRANT SELECT ON "SYS"."DBA_TABLESPACES" TO "TIVOLI";
  GRANT SELECT ON "SYS"."DBA_TEMP_FILES" TO "TIVOLI";
  GRANT SELECT ON "SYS"."DBA_HIST_SNAPSHOT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."DBA_HIST_SQLSTAT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."DBA_HIST_SQLTEXT" TO "TIVOLI";
  GRANT SELECT ON "SYS"."DBA_HIST_SQL_PLAN" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$LOGSTDBY_STATS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$LOGSTDBY_PROGRESS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$LOGSTDBY_PROCESS" TO "TIVOLI";
  GRANT SELECT ON "SYS"."V_$LOGSTDBY_STATE" TO "TIVOLI";
  GRANT SELECT ON "SYS"."DBA_HIST_SYSMETRIC_SUMMARY" TO "TIVOLI";
  GRANT SELECT ON "SYS"."OBJ$" TO "TIVOLI";


   ALTER USER "TIVOLI" DEFAULT ROLE ALL;
